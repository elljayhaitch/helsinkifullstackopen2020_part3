(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},20:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),o=n.n(r),c=n(13),u=n.n(c),i=(n(20),function(e){var t=e.filter,n=e.setFilter;return o.a.createElement("div",null,"filter shown with",o.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))}),l=n(14),s=n(3),f=n.n(s),m={getAll:function(){return f.a.get("/api/persons").then((function(e){return console.log(e),e.data}))},create:function(e){return f.a.post("/api/persons",e).then((function(e){return e.data}))},remove:function(e){return f.a.delete("".concat("/api/persons","/").concat(e)).then((function(e){return e.status}))},update:function(e){return f.a.put("".concat("/api/persons","/").concat(e.id),e).then((function(e){return e.data}))}},d=function(e,t){return e.name.toUpperCase()===t.toUpperCase()},p=function(e){var t=e.newName,n=e.setNewName,a=e.newNumber,r=e.setNewNumber,c=e.persons,u=e.setPersons,i=e.setNotification;return o.a.createElement("form",null,o.a.createElement("div",null,"name:",o.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}})),o.a.createElement("div",null,"number:",o.a.createElement("input",{value:a,onChange:function(e){return r(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),c.some((function(e){return d(e,t)}))?function(e,t,n,a,r,o,c){var u=r.filter((function(t){return d(t,e)}))[0];u.number===n?alert("".concat(e," is already added to phonebook")):window.confirm("".concat(u.name," is already added to phonebook, replace the old number with a new one?"))&&m.update(Object(l.a)({},u,{number:n})).then((function(n){var i=r.map((function(e){return e.id!==u.id?e:n}));o(i),t(""),a(""),c("Updated ".concat(e))})).catch((function(e){return c("could not update",!0)}))}(t,n,a,r,c,u,i):function(e,t,n,a,r,o,c){m.create({name:e,number:n}).then((function(n){var u=r.concat(n);o(u),t(""),a(""),c("Added ".concat(e))})).catch((function(e){return c("could not create",!0)}))}(t,n,a,r,c,u,i)}},"add")))},b=function(e){var t=e.person,n=e.persons,a=e.setPersons,r=e.setNotification;return o.a.createElement("div",null,t.name," ",t.number,o.a.createElement("button",{onClick:function(){return function(e,t,n,a){window.confirm("Delete ".concat(e.name,"?"))&&m.remove(e.id).then((function(r){var o=t.filter((function(t){return t.id!==e.id}));n(o),a("Deleted ".concat(e.name))})).catch((function(t){return a("Information of ".concat(e.name," has already been removed from server"),!0)}))}(t,n,a,r)}},"delete"))},h=function(e){var t=e.persons,n=e.filter,a=e.setPersons,r=e.setNotification;return o.a.createElement("div",null,t.filter((function(e){return e.name.toUpperCase().includes(n.toUpperCase())})).map((function(e){return o.a.createElement(b,{key:e.name,person:e,persons:t,setPersons:a,setNotification:r})})))},v=function(e){var t=e.message,n=e.notificationClass;return null===t?null:o.a.createElement("div",{className:n},t)};u.a.render(o.a.createElement((function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),l=Object(a.a)(u,2),s=l[0],f=l[1],d=Object(r.useState)(""),b=Object(a.a)(d,2),E=b[0],N=b[1],w=Object(r.useState)(""),g=Object(a.a)(w,2),j=g[0],O=g[1],C=Object(r.useState)(null),k=Object(a.a)(C,2),P=k[0],y=k[1],S=Object(r.useState)(null),U=Object(a.a)(S,2),A=U[0],D=U[1];Object(r.useEffect)((function(){m.getAll().then((function(e){return c(e)})).catch((function(e){return F("could not get all",!0)}))}),[]);var F=function(e,t){t?(D(e),setTimeout((function(){return D(null)}),5e3)):(y(e),setTimeout((function(){return y(null)}),5e3))},I={newName:s,setNewName:f,newNumber:E,setNewNumber:N,persons:n,setPersons:c,setNotification:F};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(v,{message:P,notificationClass:"notification"}),o.a.createElement(v,{message:A,notificationClass:"error"}),o.a.createElement(i,{filter:j,setFilter:O}),o.a.createElement("h3",null,"add a new"),o.a.createElement(p,I),o.a.createElement("h3",null,"Numbers"),o.a.createElement(h,{persons:n,filter:j,setPersons:c,setNotification:F}))}),null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.c239c8bd.chunk.js.map